<div class="messages-page">
  <div class="messages-header">
    <h1>Messages</h1>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    <div class="spinner"></div>
    <p>Loading conversations...</p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading && conversations.length === 0">
    <div class="empty-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
      </svg>
    </div>
    <h2>No Messages Yet</h2>
    <p>When you apply to jobs or receive proposals, your conversations will appear here.</p>
  </div>

  <!-- Conversations List -->
  <div class="conversations-list" *ngIf="!loading && conversations.length > 0">
    <div 
      class="conversation-item" 
      *ngFor="let conv of conversations"
      [class.unread]="conv.unread_count > 0"
      (click)="openConversation(conv.other_user_id)">
      
      <div class="avatar">
        <img *ngIf="conv.other_user_photo" [src]="conv.other_user_photo" [alt]="conv.other_user_name" />
        <span *ngIf="!conv.other_user_photo" class="avatar-initials">{{ getInitials(conv.other_user_name) }}</span>
      </div>
      
      <div class="conversation-content">
        <div class="conversation-header">
          <span class="user-name">{{ conv.other_user_name }}</span>
          <span class="time">{{ formatTime(conv.last_message_time) }}</span>
        </div>
        
        <div class="conversation-preview">
          <span class="job-tag" *ngIf="conv.job_title">{{ conv.job_title }}</span>
          <p class="last-message">{{ truncateMessage(conv.last_message) }}</p>
        </div>
      </div>
      
      <div class="unread-badge" *ngIf="conv.unread_count > 0">
        {{ conv.unread_count }}
      </div>
    </div>
  </div>
</div>
