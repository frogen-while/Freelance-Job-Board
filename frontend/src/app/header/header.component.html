<header class="header">
  <div class="header-inner">
    <a class="brand" routerLink="/">SkillConnect</a>

    <nav class="main-nav">
      <ng-container *ngIf="auth.isLoggedIn(); else guestNav">
        <!-- Regular users (Freelancer/Employer without staff role) see full nav -->
        <ng-container *ngIf="!auth.isAdminRole()">
          <a class="nav-link" *ngIf="auth.isFreelancer()" routerLink="/find-work/browse" routerLinkActive="active">Find Work</a>
          <a class="nav-link" *ngIf="auth.isFreelancer()" routerLink="/my-proposals" routerLinkActive="active">My Proposals</a>
          <a class="nav-link" *ngIf="auth.isEmployer()" routerLink="/hire/browse" routerLinkActive="active">Find Talent</a>
          <a class="nav-link" *ngIf="auth.isEmployer()" routerLink="/my-jobs" routerLinkActive="active">My Jobs</a>
        </ng-container>
        <!-- Staff users see Admin panel link -->
        <a class="nav-link admin-link" *ngIf="auth.isAdminRole()" routerLink="/admin" routerLinkActive="active">
          Admin
        </a>
        <a class="nav-link" routerLink="/messages" routerLinkActive="active">Messages</a>
        <a class="nav-link" routerLink="/about" routerLinkActive="active">About Us</a>
      </ng-container>
      
      <ng-template #guestNav>
        <a class="nav-link" routerLink="/find-work/browse" routerLinkActive="active">Find Work</a>
        <a class="nav-link" routerLink="/hire/browse" routerLinkActive="active">Hire Freelancers</a>
        <a class="nav-link" routerLink="/about" routerLinkActive="active">About Us</a>
      </ng-template>
    </nav>

    <nav class="header-nav">
      <ng-container *ngIf="!auth.isLoggedIn(); else loggedIn">
        <a class="nav-link" routerLink="/login" routerLinkActive="active">Log in</a>
        <a class="nav-btn" routerLink="/register" routerLinkActive="active">Sign up</a>
      </ng-container>

      <ng-template #loggedIn>
          <a class="profile-link" routerLink="/profile" routerLinkActive="active" *ngIf="auth.getUser() as user">
            <span class="profile-pic">
              <img *ngIf="profilePhotoUrl; else initialsTemplate" [src]="profilePhotoUrl" alt="Profile" />
              <ng-template #initialsTemplate>
                <span class="initials">{{ fmt.getInitials(user) }}</span>
              </ng-template>
            </span>
          </a>
        <button class="nav-link profile-logout" (click)="logout()">
          <img src="/assets/img/logout_icon.png" alt="Logout" width="25" height="25"/>
        </button>
      </ng-template>
    </nav>
  </div>
</header>